<div class="d-flex justify-content-center mt-3">

  <figure class="figure">

    <h2><figcaption class="figure-caption text-center">제목: <%= @post.title %><br /></h2>
      <p>내용 : <%= @post.content%></p>
    </figcaption>
  </figure>
</div>

<!-- like버튼 추가 -->
<% if @like.count > 0%>
<button type="button" class="btn btn-warning" id="like-button"><i style="font-size:1em;" class="fas fa-moon"></i> (<span id="like-count"><%= @post.likes.count%></span>)</button>

<% else %>
<button type="button" class="btn btn-light" id="like-button"><i style="font-size:1em;" class="fas fa-moon"></i> (<span id="like-count"><%= @post.likes.count%></span>)</button>
<% end %>

<p>
  <h5>댓글창</h5>
</p>
<%@post.comments.each do |comment|%>
  <p><%=comment.content%></p>
  <p><%=comment.created_at%></p>
  <p class = "text-right"><a href="/posts/<%=@post.id%>/destroy_comment/<%=comment.id%>" data-method="delete" data-confirm="덧글 삭제할래?">X</a></p>
  <hr />
<%end%>
<br />


<%= form_tag("/posts/#{@post.id}/add_comment", method: "post", multipart: true) do %>
  <%= text_area_tag("content") %> <br />
  <%= hidden_field_tag("post_id", value= "#{@post.id}" )%>
  <%= button_tag("뿅" , class: "btn btn-primary ")  %>
<% end %>


<hr />

  <p class = "text-right"><a href="/posts/<%=@post.id%>/edit">수정</a></p>


  <p class = "text-right"><a href="/posts/<%=@post.id%>" data-method="delete" data-confirm="삭제할래?">삭제</a></p>



<hr />

<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %>

<script>
$(function(){
  // 1.좋아요 버튼을 클릭하면
    $('#like-button').on('click', function(){
      console.log("버튼 눌리나?");
      $.ajax({
        url: '/posts/<%= @post.id %>/like',
        method: 'POST'
      });
    });
});
</script>
